--{{{  kilo, mega 
VAL K IS 1024:
VAL M IS K*K:
--}}}

ARC Hostlink:

-- network.inc is written by ispy_to_xxx.py
#INCLUDE "network.inc"


--{{{  Code
#INCLUDE "hostio.inc"
#USE "framebuf.c4h"
#USE "cntlsys.c4h"
#USE "raytrace.c4h"

CONFIG
  CHAN OF SP host.in, host.out :
  PLACE host.in, host.out ON Hostlink :
  [workers]CHAN OF ANY forward, back :
  [workers]CHAN OF ANY soft:
  CHAN OF ANY fb.in :
  CHAN OF INT image.selection :

  VAL true      IS #FFFF :
  VAL false     IS #0000 :

  PAR
    PROCESSOR framebuf.p
      frameBuffer (host.in, host.out, fb.in, image.selection, workers)

    --controlSystem ([]CHAN OF ANY toWorkers, []CHAN OF ANY fromWorkers, CHAN OF ANY fb.in, CHAN OF INT image.selection)
    PROCESSOR cntlsys.p
      -- Root - System 0,1
      controlSystem ([forward[0], forward[1]], [back[0], back[1]], fb.in, image.selection)

    --rayTrace (CHAN OF ANY fromPrev, toPrev, []CHAN OF ANY fromWorkers, []CHAN OF ANY toWorkers, VAL INT propogate, me)
    PROCESSOR raytrace.p[0]
      -- System [0] - 2,3
      rayTrace (forward[0], back[0], [back[2], back[3]], [forward[2], forward[3]], true, 0)

    PROCESSOR raytrace.p[1]
      -- System[1] - 4,5
      rayTrace (forward[1], back[1], [back[4], back[5]], [forward[4], forward[5]], true, 1)

    PROCESSOR raytrace.p[2]
      -- System[2] - 6,7
      rayTrace (forward[2], back[2], [back[6], back[7]], [forward[6], forward[7]], true, 2)

    PROCESSOR raytrace.p[3]
      -- System[3]
      rayTrace (forward[3], back[3], [soft[0]], [soft[0]], false, 3)

    PROCESSOR raytrace.p[4]
      -- System[4]
      rayTrace (forward[4], back[4], [soft[1]], [soft[1]], false, 4)

    PROCESSOR raytrace.p[5]
      -- System[5] - 8,9
      rayTrace (forward[5], back[5], [back[8], back[9]], [forward[8], forward[9]], true, 5)

    PROCESSOR raytrace.p[6]
      -- System[6] - 10
      rayTrace (forward[6], back[6], [back[10]], [forward[10]], true, 6)

    PROCESSOR raytrace.p[7]
      -- System[7]
      rayTrace (forward[7], back[7], [soft[2]], [soft[2]], false, 7)

    PROCESSOR raytrace.p[8]
      -- System[8]
      rayTrace (forward[8], back[8], [soft[3]], [soft[3]], false, 8)

    PROCESSOR raytrace.p[9]
      -- System[9] - 11
      rayTrace (forward[9], back[9], [back[11]], [forward[11]], true, 9)

    PROCESSOR raytrace.p[10]
      -- System[10]
      rayTrace (forward[10], back[10], [soft[4]], [soft[4]], false, 10)

    PROCESSOR raytrace.p[11]
      -- System[11]
      rayTrace (forward [11], back[11], [soft[5]], [soft[5]], false, 11)

:
--}}}
  


